#!/bin/bash
#
# Yes, I am this lazy!
#
# Usage: newday <year> <day>
# Example: newday 2022 01

set -e

ROOT_DIR=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )/..

NEW_YEAR=$1
NEW_DAY=$2

cd $ROOT_DIR
mkdir -p $NEW_YEAR && cd $NEW_YEAR
mkdir -p $NEW_DAY && cd $NEW_DAY
touch "${NEW_DAY/0/}.example.txt"
touch "${NEW_DAY/0/}.input.txt"
touch "${NEW_DAY/0/}a.ex"
touch "${NEW_DAY/0/}b.ex"

TEMPLATE=$(cat <<-END
lines =
  "./${NEW_DAY/0/}.example.txt"
  |> File.read!()
  |> String.trim()
  |> String.split("\n", trim: true)

defmodule Solution do
  def solve(lines) do
    lines
  end
end

IO.inspect(Solution.solve(lines), limit: :infinity, charlists: :as_lists)
END
)

echo "$TEMPLATE" > "${NEW_DAY/0/}a.ex"
echo "$TEMPLATE" > "${NEW_DAY/0/}b.ex"
